/*-- scss:defaults --*/

//
// THEME-DARK.SCSS
// Oregon Enterprise Data Analytics - Dark Theme Overrides
//

// Note: We don't redefine the base SASS variables here (e.g., $primary).
// Instead, we override the final CSS custom properties that Bootstrap uses.

// Define lighter tints for use in the dark theme.
// You can pull these from your _brand.yml file.
$north-star-indigo-40: #ACADD3;
$north-star-indigo-60: #8283BE;
$forest-green-60: #749592;
$harvest-gold-60: #F3E2A1;
$marionberry-red-60: #CB6996;
$glacial-blue-60: #D1EAF9;
$fog-gray: #F4F2ED;
$ashland-charcoal: #414042;
$ashland-charcoal-80: #676668;
$ashland-charcoal-20: #D9D9D9;

/*-- scss:rules --*/

body.quarto-dark {

  // 1. SEMANTIC COLOR OVERRIDES (DARK THEME)
  // -----------------------------------------------------
  // Remap the CSS custom properties for the dark theme.
  
  // Body colors
  --bs-body-color: #{$fog-gray};
  --bs-body-bg: #{$ashland-charcoal};
  
  // Heading and border colors
  --bs-headings-color: #{$north-star-indigo-40};
  --bs-border-color: #{$ashland-charcoal-80};
  
  // Theme colors
  --bs-primary: #{$north-star-indigo-60};
  --bs-secondary: #{$ashland-charcoal-20};
  --bs-success: #{$forest-green-60};
  --bs-warning: #{$harvest-gold-60};
  --bs-danger: #{$marionberry-red-60};
  --bs-info: #{$glacial-blue-60};
  --bs-light: #{$ashland-charcoal}; // Dark mode 'light' is the dark background
  --bs-dark: #{$fog-gray};         // Dark mode 'dark' is the light text
  
  // Links
  --bs-link-color: #{$north-star-indigo-40};
  --bs-link-hover-color: #{$fog-gray};
  
  // Background for cards, callouts, etc.
  --bs-tertiary-bg: #{$ashland-charcoal-80};

  // 2. LOGO SWAPPING (DARK THEME)
  // Logo switching rules
  .sidebar-logo.light-content,
  img[src*="oeda-logo-primary-fixed.png"].light-content {
    display: none !important;
  }
  
  .sidebar-logo.dark-content,
  img[src*="oeda-logo-primary-fixed.png"].dark-content {
    display: inline-block !important;
    content: url("/assets/oeda-logo-primary-dark-fixed.png");
  }

  .navbar-logo.light-content,
  img[src*="oeda-icon-fixed-whiteoutline.png"].light-content {
    display: none;
  }
  
  .navbar-logo.dark-content,
  img[src*="oeda-icon-dark-fixed.png"].dark-content {
    display: inline-block;
    content: url("/assets/oeda-icon-dark-fixed.png");
  }

  // FIGURE CAPTION FIXES
  // -----------------------------------------------------
  // Add custom properties for figure captions to ensure readability
  --figcaption-color: #{$fog-gray};           // Light text for dark mode
  --figcaption-bg: transparent;               // Optional: background if needed
  --figcaption-border-color: #{$ashland-charcoal-80}; // Optional: border color
  
  // Direct styling for figcaption elements
  figcaption {
    color: var(--figcaption-color) !important;
    background-color: var(--figcaption-bg);
    
    // Optional: Add some subtle styling
    border-top: 1px solid var(--figcaption-border-color);
    padding-top: 0.5rem;
    margin-top: 0.5rem;
    font-style: italic;
    font-size: 0.9rem;
  }
  
  // Also target any figure captions that might be nested differently
  figure figcaption,
  .figure figcaption,
  .figure-caption {
    color: var(--figcaption-color) !important;
  }
  // ENHANCED CALLOUT BACKGROUNDS
  // -----------------------------------------------------
  // Create more contrast between callouts and the dark background
  
  // Base callout background - lighter than body background for contrast
  --callout-bg-base: #{lighten($ashland-charcoal, 8%)};        // Slightly lighter than main bg
  --callout-bg-elevated: #{lighten($ashland-charcoal, 12%)};   // Even lighter for headers
  --callout-border-base: #{lighten($ashland-charcoal, 15%)};   // Subtle border
  
  // Callout type-specific backgrounds (slight tints of brand colors)
  --callout-bg-note: #{mix($north-star-indigo-40, lighten($ashland-charcoal, 8%), 15%)};
  --callout-bg-tip: #{mix($forest-green-60, lighten($ashland-charcoal, 8%), 15%)};
  --callout-bg-warning: #{mix($harvest-gold-60, lighten($ashland-charcoal, 8%), 15%)};
  --callout-bg-important: #{mix($marionberry-red-60, lighten($ashland-charcoal, 8%), 15%)};
  --callout-bg-caution: #{mix($harvest-gold-60, lighten($ashland-charcoal, 8%), 15%)};
  
  // CALLOUT STYLING OVERRIDES
  // -----------------------------------------------------
  
  // Base callout styling
  .callout {
    background-color: var(--callout-bg-base) !important;
    border: 1px solid var(--callout-border-base);
    border-radius: 0.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    
    // Ensure text is readable
    color: var(--bs-body-color);
    
    // Add subtle transition for interactive elements
    transition: all 0.2s ease-in-out;
  }
  
  // Callout body styling
  .callout .callout-body {
    background-color: transparent;
    padding: 1rem;
  }
  
  // Enhanced header styling for default style callouts
  .callout.callout-style-default > .callout-header {
    background-color: var(--callout-bg-elevated) !important;
    border-bottom: 1px solid var(--callout-border-base);
    padding: 0.75rem 1rem;
  }
  
  // Type-specific callout backgrounds
  .callout-note {
    background-color: var(--callout-bg-note) !important;
  }
  
  .callout-tip {
    background-color: var(--callout-bg-tip) !important;
  }
  
  .callout-warning {
    background-color: var(--callout-bg-warning) !important;
  }
  
  .callout-important {
    background-color: var(--callout-bg-important) !important;
  }
  
  .callout-caution {
    background-color: var(--callout-bg-caution) !important;
  }
  
  // Enhance the left border for better visual hierarchy
  .callout-note {
    border-left: 4px solid var(--bs-primary);
  }
  
  .callout-tip {
    border-left: 4px solid var(--bs-success);
  }
  
  .callout-warning {
    border-left: 4px solid var(--bs-warning);
  }
  
  .callout-important {
    border-left: 4px solid var(--bs-danger);
  }
  
  .callout-caution {
    border-left: 4px solid var(--bs-warning);
  }
  
  // Hover effects for interactive callouts
  .callout:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }
  
  // Ensure collapsible callouts work well
  .callout.callout-collapsible {
    .callout-header {
      cursor: pointer;
      
      &:hover {
        background-color: var(--callout-bg-elevated) !important;
        filter: brightness(1.1);
      }
    }
  }
  
  // Make sure callout text has good contrast
  .callout-title {
    color: var(--bs-emphasis-color);
    font-weight: 600;
  }
  
  .callout p {
    color: var(--bs-body-color);
    margin-bottom: 0.5rem;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}